# GitHub Contribution Gravity Lens

## Phase 2 Design Revision Specification

---

## 1. 改修目的

現状の実装は以下の課題を抱えている：

* 上位X%セルの変化が弱く、視覚的インパクトが不足
* 局所レンズ効果が小さく、空間歪曲の印象が薄い
* アニメーションの静→動のコントラストが弱い
* 全体が整いすぎており「事件性」が不足

本改修では、

* 上位X%の視覚的特異性を強化
* 局所干渉と非対称性の導入
* 一瞬のピーク強調
* 立体的密度勾配の追加

を実施し、記憶に残る表現へ進化させる。

---

## 2. 上位X%セルの強化設計

### 2.1 形状変化

上位X%セルのみ以下を適用：

* border-radius: 6px（通常: 2px）
* 回転: ±1〜2deg（ランダムだが固定シード）

目的：視覚的違和感の創出

---

## 3. 局所レンズ強化

### 3.1 影響半径拡張

```
R = 60px
```

### 3.2 強度倍率

```
MAX_WARP = 0.5
```

### 3.3 非対称歪曲

横方向を強めに設定：

```
x' = x + dx * factor * 1.2
y' = y + dy * factor * 0.8
```

目的：完全対称性の破壊

---

## 4. 干渉ピーク演出

複数レンズ干渉領域を検出：

```
interference = Σ factor_i > threshold
```

干渉点のみ：

* 一瞬明度 +20%
* duration: 0.3秒
* opacity増加は最小限

目的：偶然性・個性の付与

---

## 5. 密度勾配演出

最大歪曲時：

* 異常点周囲セルの明度 -8%
* 中心セルのコントラスト +5%

これにより立体感を強調

---

## 6. アニメーション再設計（時間再構築版）

### 全体ループ: 14秒

目的：

* 同時多発的なレンズ発生を防ぐ
* 分布に応じて時間的に“流れる”挙動を作る
* 空間がゆっくりと影響を受ける印象を与える

---

### 時間構造の考え方

各上位X%セルは同時発火しない。

```
activationDelay = map(xPosition, 0 → width, 0s → 6s)
```

横方向に時間位相をずらすことで、
左から右へ重力場が伝播するように見せる。

---

### Phase 1（0–2秒）

完全静止。

目的：静との対比を強める。

---

### Phase 2（2–4秒）

上位X%セルが個別に順次覚醒。

* activationDelayに従い発火
* 明度 +10%
* duration: 1.2秒
* easing: ease-out

一斉ではなく、波のように点灯。

---

### Phase 3（4–10秒）

局所レンズ発生フェーズ。

各異常点は：

* 発火後0.5秒で歪曲開始
* 最大歪曲到達まで2秒
* 最大状態維持 1.5秒

同時ではなく時間差で進行する。

これにより、空間に“重力の流れ”が生まれる。

---

### Phase 4（8–11秒）

干渉ピーク検出。

複数レンズが重なる箇所のみ：

* 0.4秒だけ明度 +20%
* シャープネス微増

全体同時ではなく、干渉箇所のみ瞬間強調。

---

### Phase 5（11–14秒）

復元フェーズ。

* レンズ強度をゆっくり減衰
* easing: ease-in-out
* 2秒かけて自然復元

最後は完全静止状態へ。

---

### 時間設計のポイント

* 同期を避ける
* 横方向に位相差をつける
* 最大状態を十分に“見せる時間”を確保する
* 流れを感じさせるため10秒以上を採用

---

## 7. カラー強調調整

### 7.1 上位X%ピーク色

ピーク瞬間のみ：

```
#7df9ff
```

常時適用禁止。

### 7.2 紫シフト（微弱）

色相 +5〜10deg（最大歪曲時のみ）

---

## 8. Z方向演出

上位X%セル：

* translateZ(1px)
* シャープネス微増

影は使用しない

---

## 9. 禁止事項

* ブラックホール本体描画
* 強いグロー
* 全体派手変化
* パーティクル

---

## 10. 成功基準

* 上位X%が明確に“別物”と認識される
* 干渉によりユーザーごとの差異が発生
* 静止時は美しい
* 動いた瞬間に違和感がある
* READMEで視線が止まる

---

## 11. 非機能要件

* GIF 2MB以下
* 24fps
* SVG互換
* GitHub背景適合

---

## 12. ライセンス

MIT
